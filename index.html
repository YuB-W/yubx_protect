<!DOCTYPE html>
<html>
<head>
    <title>Chromecast Controller</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
            margin: 0;
            padding: 0;
            text-align: center;
        }
        h1 {
            color: #333;
        }
        .device-list {
            margin: 20px;
        }
        .device-item {
            background-color: #fff;
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 10px;
            margin: 5px;
            display: inline-block;
            width: 200px;
            text-align: left;
        }
        button {
            margin: 5px;
            padding: 10px;
            border: none;
            border-radius: 5px;
            background-color: #007bff;
            color: #fff;
            cursor: pointer;
        }
        button:hover {
            background-color: #0056b3;
        }
    </style>
</head>
<body>
    <h1>Chromecast Controller</h1>
    <div class="device-list">
        {% for device in chromecasts %}
        <div class="device-item">
            <h2>{{ device.name }}</h2>
            <button onclick="castText('{{ loop.index0 }}')">Cast Text</button>
            <button onclick="castMedia('{{ loop.index0 }}')">Cast Media</button>
            <button onclick="shutdownDevice('{{ loop.index0 }}')">Shutdown</button>
            <button onclick="turnOnDevice('{{ loop.index0 }}')">Turn On</button>
            <button onclick="setVolume('{{ loop.index0 }}')">Set Volume</button>
            <button onclick="muteDevice('{{ loop.index0 }}')">Mute</button>
            <button onclick="unmuteDevice('{{ loop.index0 }}')">Unmute</button>
        </div>
        {% endfor %}
    </div>
    <script>
        function sendRequest(action, data) {
            fetch('/' + action, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
            }).then(response => response.json())
              .then(data => console.log(data))
              .catch(error => console.error('Error:', error));
        }

        function castText(deviceId) {
            sendRequest('cast_text', { device_ids: [deviceId], text_message: 'Hello World!' });
        }

        function castMedia(deviceId) {
            sendRequest('cast_media', { device_ids: [deviceId], media_url: 'http://example.com/media.mp4', media_type: 'video/mp4' });
        }

        function shutdownDevice(deviceId) {
            sendRequest('shutdown', { device_ids: [deviceId] });
        }

        function turnOnDevice(deviceId) {
            sendRequest('turn_on', { device_ids: [deviceId] });
        }

        function setVolume(deviceId) {
            sendRequest('set_volume', { device_ids: [deviceId], volume_level: 0.5 });
        }

        function muteDevice(deviceId) {
            sendRequest('mute', { device_ids: [deviceId] });
        }

        function unmuteDevice(deviceId) {
            sendRequest('unmute', { device_ids: [deviceId] });
        }
    </script>
</body>
</html>
